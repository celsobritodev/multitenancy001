{
  "info": {
    "_postman_id": "284e2d30-1359-4a98-95f9-19ff3b312460",
    "name": "multitenancy001-e2e (v10.9.3 - FULL - ALL ENDPOINTS - STRICT - tenant ambiguity + diagnostics)",
    "description": "v10.8: STRICT collection-level contract + multi-tenant login ambiguity scenario (diagnostic + realistic CNPJ gen). | v10.9.3: fail on any 5xx (>=500).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "10.9.3"
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// ===== STRICT MODE GLOBAL GUARD =====",
          "const strict = true;",
          "",
          "// ===== AUTO-HEADER for /api/tenant/** =====",
          "const url = pm.request.url ? pm.request.url.toString() : '';",
          "",
          "if (url.includes('/api/tenant/')) {",
          "  // Do NOT override explicit request headers",
          "  const hasAuth = pm.request.headers.has('Authorization');",
          "  const hasTenant = pm.request.headers.has('X-Tenant');",
          "",
          "  const token = pm.environment.get('tenant_access_token');",
          "  const schema = pm.environment.get('tenant_schema');",
          "",
          "  if (!hasAuth && token) {",
          "    pm.request.headers.upsert({",
          "      key: 'Authorization',",
          "      value: 'Bearer ' + token",
          "    });",
          "  }",
          "",
          "  if (!hasTenant && schema) {",
          "    pm.request.headers.upsert({",
          "      key: 'X-Tenant',",
          "      value: schema",
          "    });",
          "  }",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// ==============================================",
          "// âœ… E2E Collection tests (single script)",
          "// - Block 500 globally",
          "// - Allowed statuses per HTTP method (smoke contract)",
          "// - Optional stricter behavior via e2e_mode",
          "// ==============================================",
          "",
          "const method = (pm.request.method || '').toUpperCase();",
          "const url = pm.request.url.toString();",
          "const status = pm.response.code;",
          "",
          "const mode = (pm.environment.get('e2e_mode') || pm.collectionVariables.get('e2e_mode') || 'smoke').toLowerCase();",
          "const allowClientErrorsInE2e = String(pm.environment.get('e2e_allow_client_errors') || pm.collectionVariables.get('e2e_allow_client_errors') || 'true').toLowerCase() !== 'false';",
          "",
          "// Allowed statuses by method (SMOKE contract: accept 2xx + expected client errors, but NEVER 500).",
          "const allowedByMethodSmoke = {",
          "  GET:    [200, 400, 401, 403, 404, 409],",
          "  POST:   [200, 201, 204, 400, 401, 403, 404, 409],",
          "  PUT:    [200, 204, 400, 401, 403, 404, 409],",
          "  PATCH:  [200, 204, 400, 401, 403, 404, 409],",
          "  DELETE: [200, 204, 400, 401, 403, 404, 409]",
          "};",
          "",
          "// In E2E mode you can be stricter. Default: still accept client errors to avoid breaking on \"empty body\" calls.",
          "const allowedByMethodE2e = {",
          "  GET:    allowClientErrorsInE2e ? allowedByMethodSmoke.GET    : [200],",
          "  POST:   allowClientErrorsInE2e ? allowedByMethodSmoke.POST   : [200, 201, 204],",
          "  PUT:    allowClientErrorsInE2e ? allowedByMethodSmoke.PUT    : [200, 204],",
          "  PATCH:  allowClientErrorsInE2e ? allowedByMethodSmoke.PATCH  : [200, 204],",
          "  DELETE: allowClientErrorsInE2e ? allowedByMethodSmoke.DELETE : [200, 204]",
          "};",
          "",
          "const allowed = (mode === 'e2e' ? allowedByMethodE2e : allowedByMethodSmoke)[method] || [200, 201, 204, 400, 401, 403, 404, 409];",
          "",
          "function diagContext() {",
          "  const rid = pm.response.headers.get('X-Request-Id') || pm.response.headers.get('X-RequestId') || pm.response.headers.get('requestId') || pm.response.headers.get('Request-Id');",
          "  const tenant = pm.request.headers.get('X-Tenant');",
          "  const auth = pm.request.headers.get('Authorization') ? 'Bearer ***' : null;",
          "  const body = pm.response.text();",
          "  const bodyPreview = body && body.length > 800 ? (body.substring(0, 800) + 'â€¦') : body;",
          "  return { method, url, status, rid, tenant, auth, bodyPreview };",
          "}",
          "",
          "pm.test('No 5xx in collection', function () {",
          "  const ok = status < 500;",
          "  if (!ok) {",
          "    console.error('âŒ 5xx detected:', diagContext());",
          "  }",
          "  pm.expect(status, 'Server must not return 5xx').to.be.below(500);",
          "});",
          "",
          "pm.test('Status code acceptable for ' + (mode === 'e2e' ? 'E2E' : 'SMOKE') + ' (' + method + ')', function () {",
          "  const ok = allowed.includes(status);",
          "  if (!ok) {",
          "    console.error('âŒ Unexpected status:', { allowed, ...diagContext() });",
          "  }",
          "  pm.expect(allowed, `Allowed status codes for ${method} in ${mode} mode`).to.include(status);",
          "});"
        ]
      }
    }
  ],
  "item": [
    {
      "name": "ðŸ“¦ 00 - BOOTSTRAP (V3)",
      "description": "Setup inicial - health, signup, logins",
      "item": [
        {
          "name": "00.01 health",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Health OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/actuator/health"
          }
        },
        {
          "name": "00.02 signup",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (!pm.environment.get('tenant_email')) {",
                  "  const ts = Date.now();",
                  "  const email = `e2e_${ts}@tenant.local`;",
                  "  pm.environment.set('tenant_email', email);",
                  "  console.log(`ðŸ“§ Email gerado: ${email}`);",
                  "}"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Signup OK', () => pm.expect(pm.response.code).to.be.oneOf([200,201]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('account_id', String(json.account.id));",
                  "pm.environment.set('tenant_schema', json.account.tenantSchema);",
                  "pm.environment.set('tenant_slug', json.account.slug);",
                  "console.log(`âœ… Conta criada: ID=${json.account.id}, Schema=${json.account.tenantSchema}`);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"displayName\": \"Tenant E2E\",\n  \"loginEmail\": \"{{tenant_email}}\",\n  \"taxIdType\": \"{{tenant_tax_id_type}}\",\n  \"taxIdNumber\": \"{{tenant_tax_id_number}}\",\n  \"password\": \"{{tenant_password}}\",\n  \"confirmPassword\": \"{{tenant_password}}\"\n}"
            },
            "url": "{{base_url}}/api/signup"
          }
        },
        {
          "name": "00.03 tenant login",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Tenant login OK', () => pm.expect(pm.response.code).to.eql(200));",
                  "const json = pm.response.json();",
                  "pm.environment.set('tenant_access_token', json.accessToken);",
                  "pm.environment.set('tenant_refresh_token', json.refreshToken);",
                  "pm.environment.set('tenant_user_id', String(json.userId));",
                  "console.log(`âœ… Tenant logado: ID=${json.userId}`);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{tenant_email}}\",\n  \"password\": \"{{tenant_password}}\"\n}"
            },
            "url": "{{base_url}}/api/tenant/auth/login"
          }
        },
        {
          "name": "00.04 tenant me",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Tenant me OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/me"
          }
        },
        {
          "name": "00.05 controlplane login (superadmin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Login superadmin OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('superadmin_token', json.accessToken);",
                  "pm.environment.set('superadmin_refresh', json.refreshToken);",
                  "pm.environment.set('superadmin_user_id', String(json.userId));",
                  "console.log(`âœ… Superadmin logado: ID=${json.userId}`);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"superadmin@platform.local\",\n  \"password\": \"admin123\"\n}"
            },
            "url": "{{base_url}}/api/controlplane/auth/login"
          }
        },
        {
          "name": "00.06 login as billing manager",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Login billing manager OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('billing_token', json.accessToken);",
                  "pm.environment.set('billing_refresh', json.refreshToken);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"billing@platform.local\",\n  \"password\": \"admin123\"\n}"
            },
            "url": "{{base_url}}/api/controlplane/auth/login"
          }
        },
        {
          "name": "00.07 login as support",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Login support OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('support_token', json.accessToken);",
                  "pm.environment.set('support_refresh', json.refreshToken);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"support@platform.local\",\n  \"password\": \"admin123\"\n}"
            },
            "url": "{{base_url}}/api/controlplane/auth/login"
          }
        },
        {
          "name": "00.08 login as operator",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Login operator OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('operator_token', json.accessToken);",
                  "pm.environment.set('operator_refresh', json.refreshToken);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"operator@platform.local\",\n  \"password\": \"admin123\"\n}"
            },
            "url": "{{base_url}}/api/controlplane/auth/login"
          }
        }
      ]
    },
    {
      "name": "ðŸ” 01 - TENANT AUTH TESTS (V3)",
      "description": "Testes de refresh e logout do tenant",
      "item": [
        {
          "name": "01.01 tenant refresh",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Tenant refresh OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('tenant_refresh_old', pm.environment.get('tenant_refresh_token'));",
                  "pm.environment.set('tenant_access_token', json.accessToken);",
                  "pm.environment.set('tenant_refresh_token', json.refreshToken);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{tenant_refresh_token}}\"\n}"
            },
            "url": "{{base_url}}/api/tenant/auth/refresh"
          }
        },
        {
          "name": "01.02 tenant logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Tenant logout OK', () => pm.expect(pm.response.code).to.be.oneOf([204]));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{tenant_refresh_token}}\",\n  \"allDevices\": false\n}"
            },
            "url": "{{base_url}}/api/tenant/auth/logout"
          }
        },
        {
          "name": "01.50 - MULTI-TENANT LOGIN AMBIGUITY (V10.6)",
          "item": [
            {
              "name": "01.50.01 signup tenant #2",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "http://localhost:8080/api/signup",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "signup"
                  ]
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"displayName\": \"Tenant E2E #2\",\n  \"loginEmail\": \"{{tenant2_email}}\",\n  \"taxIdType\": \"{{tenant2_tax_id_type}}\",\n  \"taxIdNumber\": \"{{tenant2_tax_id_number}}\",\n  \"password\": \"{{tenant2_password}}\",\n  \"confirmPassword\": \"{{tenant2_password}}\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// 01.50.01 - Prepare variables for tenant #2 signup (deterministic + valid).",
                      "",
                      "// --- Generate tenant2_email and shared_email once per run ---",
                      "const now = Date.now();",
                      "function randHex(n) {",
                      "  const chars = 'abcdef0123456789';",
                      "  let s = '';",
                      "  for (let i = 0; i < n; i++) s += chars[Math.floor(Math.random() * chars.length)];",
                      "  return s;",
                      "}",
                      "",
                      "let tenant2Email = pm.collectionVariables.get('tenant2_email');",
                      "let sharedEmail = pm.collectionVariables.get('shared_email');",
                      "if (!tenant2Email) {",
                      "  tenant2Email = `e2e2_${now}_${randHex(6)}@tenant.local`;",
                      "  pm.collectionVariables.set('tenant2_email', tenant2Email);",
                      "}",
                      "if (!sharedEmail) {",
                      "  sharedEmail = `shared_${now}_${randHex(6)}@tenant.local`;",
                      "  pm.collectionVariables.set('shared_email', sharedEmail);",
                      "}",
                      "console.log(`[v10.8.5] tenant2_email=${tenant2Email}`);",
                      "console.log(`[v10.8.5] shared_email=${sharedEmail}`);",
                      "",
                      "// --- Password (>=8, letters+numbers) ---",
                      "const p1 = pm.environment.get('tenant_password');",
                      "let p2 = pm.collectionVariables.get('tenant2_password');",
                      "if (!p2) {",
                      "  if (p1) {",
                      "    pm.collectionVariables.set('tenant2_password', p1);",
                      "    p2 = p1;",
                      "  } else {",
                      "    pm.collectionVariables.set('tenant2_password', 'E2ePass123');",
                      "    p2 = 'E2ePass123';",
                      "  }",
                      "}",
                      "",
                      "// --- taxIdType ---",
                      "const t1 = pm.environment.get('tenant_tax_id_type');",
                      "let t2 = pm.collectionVariables.get('tenant2_tax_id_type');",
                      "if (!t2) {",
                      "  pm.collectionVariables.set('tenant2_tax_id_type', (t1 && (t1 === 'CPF' || t1 === 'CNPJ')) ? t1 : 'CNPJ');",
                      "}",
                      "",
                      "// --- taxIdNumber (must differ from tenant #1 under global-unique rule) ---",
                      "const n1 = pm.environment.get('tenant_tax_id_number');",
                      "let n2 = pm.collectionVariables.get('tenant2_tax_id_number');",
                      "if (!n2) {",
                      "  if (n1 && String(n1).length >= 11) {",
                      "    const s = String(n1);",
                      "    const last = s[s.length - 1];",
                      "    const next = String((parseInt(last, 10) + 1) % 10);",
                      "    n2 = s.slice(0, -1) + next;",
                      "  } else {",
                      "    n2 = '12345678000190';",
                      "  }",
                      "  pm.collectionVariables.set('tenant2_tax_id_number', n2);",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test(\"Tenant #2 signup OK\", function () {",
                      "  const code = pm.response.code;",
                      "  if (code !== 201) {",
                      "    let body = pm.response.text();",
                      "    if (body && body.length > 1500) body = body.slice(0, 1500) + \"...(truncated)\";",
                      "    console.log(\"âŒ Signup #2 unexpected status:\", code);",
                      "    console.log(\"Request URL:\", pm.request.url ? pm.request.url.toString() : \"\");",
                      "    console.log(\"Response body:\", body);",
                      "  }",
                      "  pm.expect(code, \"signup2 status\").to.equal(201);",
                      "});",
                      "",
                      "const json = pm.response.json();",
                      "pm.expect(json && json.account, \"signup response.account\").to.be.an(\"object\");",
                      "pm.collectionVariables.set(\"tenant2_account_id\", String(json.account.id));",
                      "pm.collectionVariables.set(\"tenant2_schema\", String(json.account.tenantSchema));",
                      "pm.collectionVariables.set(\"tenant2_slug\", String(json.account.slug));",
                      "console.log(`âœ… Tenant #2 criado: ID=${json.account.id}, Schema=${json.account.tenantSchema}, Slug=${json.account.slug}`);"
                    ]
                  }
                }
              ]
            },
            {
              "name": "01.50.02 tenant #2 login (admin)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "http://localhost:8080/api/tenant/auth/login",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "tenant",
                    "auth",
                    "login"
                  ]
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{tenant2_email}}\",\n  \"password\": \"{{tenant2_password}}\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test(\"Tenant #2 login OK (direct)\", function () {",
                      "  pm.expect(pm.response.code, \"tenant2 login status\").to.equal(200);",
                      "});",
                      "try {",
                      "  const json = pm.response.json();",
                      "  const token = json && (json.token || json.accessToken || json.jwt);",
                      "  pm.expect(token, \"tenant2 token\").to.be.a(\"string\").and.not.empty;",
                      "  pm.collectionVariables.set(\"tenant2_token\", token);",
                      "} catch (e) {",
                      "  pm.test(\"Tenant #2 login response must be JSON with token\", function () { throw e; });",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "01.50.03 create shared user in tenant #1",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{tenant_access_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Tenant",
                    "value": "{{tenant_schema}}"
                  }
                ],
                "url": {
                  "raw": "http://localhost:8080/api/tenant/users",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "tenant",
                    "users"
                  ]
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Shared User\",\n  \"email\": \"{{shared_email}}\",\n  \"password\": \"{{shared_password}}\",\n  \"role\": \"TENANT_USER\",\n  \"permissions\": []\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test(\"Create shared user (201 or 409 if already exists)\", function () {",
                      "  pm.expect([201,409], \"status\").to.include(pm.response.code);",
                      "});",
                      "if (pm.response.code === 409) {",
                      "  console.warn(\"[v10.6] shared user already exists (409). OK for idempotent run.\");",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// [v10.9.1] Ensure shared_email/shared_password are always defined and valid.",
                      "pm.collectionVariables.set(\"shared_password\", \"E2ePass123\");",
                      "let se = pm.collectionVariables.get('shared_email');",
                      "if (!se) {",
                      "  const now = Date.now();",
                      "  se = `shared_${now}@tenant.local`;",
                      "  pm.collectionVariables.set('shared_email', se);",
                      "  console.warn('[v10.9.1] shared_email was missing; generated:', se);",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "01.50.04 create shared user in tenant #2",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{tenant2_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Tenant",
                    "value": "{{tenant2_schema}}"
                  }
                ],
                "url": {
                  "raw": "http://localhost:8080/api/tenant/users",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "tenant",
                    "users"
                  ]
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Shared User\",\n  \"email\": \"{{shared_email}}\",\n  \"password\": \"{{shared_password}}\",\n  \"role\": \"TENANT_USER\",\n  \"permissions\": []\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test(\"Create shared user (201 or 409 if already exists)\", function () {",
                      "  pm.expect([201,409], \"status\").to.include(pm.response.code);",
                      "});",
                      "if (pm.response.code === 409) {",
                      "  console.warn(\"[v10.6] shared user already exists (409). OK for idempotent run.\");",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// [v10.9.1] Ensure shared_email/shared_password are always defined and valid.",
                      "pm.collectionVariables.set(\"shared_password\", \"E2ePass123\");",
                      "let se = pm.collectionVariables.get('shared_email');",
                      "if (!se) {",
                      "  const now = Date.now();",
                      "  se = `shared_${now}@tenant.local`;",
                      "  pm.collectionVariables.set('shared_email', se);",
                      "  console.warn('[v10.9.1] shared_email was missing; generated:', se);",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "01.50.04a controlplane list tenant-users (account #1) - shared index check",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test(\"ControlPlane list tenant-users OK\", function () {",
                      "  pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test(\"Shared email must be present in tenant-users index\", function () {",
                      "  const sharedEmail = pm.collectionVariables.get(\"shared_email\");",
                      "  const bodyText = pm.response.text();",
                      "  pm.expect(sharedEmail, \"shared_email set\").to.be.a(\"string\");",
                      "  pm.expect(bodyText, \"response must contain shared_email (simple contains check)\").to.include(sharedEmail);",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}/tenant-users",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}",
                    "tenant-users"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "01.50.04b controlplane list tenant-users (account #2) - shared index check",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test(\"ControlPlane list tenant-users OK\", function () {",
                      "  pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test(\"Shared email must be present in tenant-users index\", function () {",
                      "  const sharedEmail = pm.collectionVariables.get(\"shared_email\");",
                      "  const bodyText = pm.response.text();",
                      "  pm.expect(sharedEmail, \"shared_email set\").to.be.a(\"string\");",
                      "  pm.expect(bodyText, \"response must contain shared_email (simple contains check)\").to.include(sharedEmail);",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{tenant2_account_id}}/tenant-users",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{tenant2_account_id}}",
                    "tenant-users"
                  ]
                }
              },
              "response": []
            },
                       {
              "name": "01.50.05 tenant login (ambiguous) => 409 TENANT_SELECTION_REQUIRED",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "http://localhost:8080/api/tenant/auth/login",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "tenant",
                    "auth",
                    "login"
                  ]
                },
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{shared_email}}\",\n  \"password\": \"{{shared_password}}\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// STRICT contract: ambiguous tenant login must return 409 TENANT_SELECTION_REQUIRED",
                      "(function () {",
                      "  const res = pm.response.json ? pm.response.json() : null;",
                      "  const status = pm.response.code;",
                      "  const bodyStr = pm.response.text();",
                      "",
                      "  // helpful diagnostics when the backend returns INVALID_USER (401)",
                      "  if (status === 401) {",
                      "    try {",
                      "      const err = (res && (res.error || res.code)) ? (res.error || res.code) : null;",
                      "      if (err === 'INVALID_USER') {",
                      "        console.warn('âš ï¸ Ambiguous login returned 401/INVALID_USER. This usually means the shared user exists in tenant schemas, but the PUBLIC index (login_identities) was not provisioned for that email in both accounts.');",
                      "        console.warn('   Expected: public.login_identities should contain 2 rows for shared_email (subject_type=TENANT_ACCOUNT, account_id=accountId).');",
                      "        console.warn('   Check DB: SELECT subject_type, account_id, subject_id, email FROM public.login_identities WHERE email = \\'{{shared_email}}\\';');",
                      "      }",
                      "    } catch (e) { /* ignore */ }",
                      "  }",
                      "",
                      "  pm.test('Ambiguous login must return 409', function () {",
                      "    pm.expect(status, 'status').to.eql(409);",
                      "  });",
                      "",
                      "  pm.test('Error must be TENANT_SELECTION_REQUIRED', function () {",
                      "    const err = res && (res.error || res.code);",
                      "    pm.expect(err, 'error/code').to.eql('TENANT_SELECTION_REQUIRED');",
                      "  });",
                      "",
                      "  pm.test('Must include challengeId', function () {",
                      "    // âœ… CORRIGIDO: challengeId estÃ¡ no nÃ­vel raiz, nÃ£o dentro de details",
                      "    const cid = res && res.challengeId;",
                      "    pm.expect(cid, 'challengeId').to.be.a('string');",
                      "    // Salvar para uso no prÃ³ximo request",
                      "    if (cid) {",
                      "      pm.collectionVariables.set('ambig_challenge_id', cid);",
                      "    }",
                      "  });",
                      "",
                      "  pm.test('Must include tenants list in details', function () {",
                      "    // âœ… CORRIGIDO: details Ã© um array no nÃ­vel raiz",
                      "    const tenants = res && res.details;",
                      "    pm.expect(tenants, 'tenants list').to.be.an('array');",
                      "    pm.expect(tenants.length, 'tenants list size').to.be.greaterThan(1);",
                      "    ",
                      "    // Validar estrutura de cada tenant",
                      "    if (tenants && tenants.length > 0) {",
                      "      const first = tenants[0];",
                      "      pm.expect(first, 'tenant item').to.be.an('object');",
                      "      pm.expect(first.accountId, 'tenant.accountId').to.be.a('number');",
                      "      pm.expect(first.displayName, 'tenant.displayName').to.be.a('string');",
                      "      pm.expect(first.slug, 'tenant.slug').to.be.a('string');",
                      "      ",
                      "      // Salvar o primeiro tenant para uso no confirm",
                      "      pm.collectionVariables.set('ambig_selected_account_id', String(first.accountId));",
                      "      pm.collectionVariables.set('ambig_selected_tenant_slug', first.slug);",
                      "    }",
                      "  });",
                      "",
                      "  pm.test('Must NOT return token yet', function () {",
                      "    const token = pm.collectionVariables.get('tenant_token');",
                      "    // token should NOT be overwritten by this request",
                      "    pm.expect(true).to.be.true;",
                      "  });",
                      "",
                      "  // Preparar payload para o prÃ³ximo request (login/confirm)",
                      "  const challengeId = pm.collectionVariables.get('ambig_challenge_id');",
                      "  const slug = pm.collectionVariables.get('ambig_selected_tenant_slug');",
                      "  if (challengeId && slug) {",
                      "    const confirmPayload = JSON.stringify({",
                      "      challengeId: challengeId,",
                      "      slug: slug",
                      "    });",
                      "    pm.collectionVariables.set('login_confirm_payload', confirmPayload);",
                      "    console.log('âœ… Payload para confirm criado:', confirmPayload);",
                      "  }",
                      "})();"
                    ]
                  }
                }
              ]
            },
            {
              "name": "01.50.06 tenant login confirm (challengeId + tenant selection) => 200 JWT",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "http://localhost:8080/api/tenant/auth/login/confirm",
                  "protocol": "http",
                  "host": [
                    "localhost"
                  ],
                  "port": "8080",
                  "path": [
                    "api",
                    "tenant",
                    "auth",
                    "login",
                    "confirm"
                  ]
                },
                "body": {
                  "mode": "raw",
                  "raw": "{{login_confirm_payload}}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "const payload = pm.collectionVariables.get(\"login_confirm_payload\");",
                      "if (!payload) {",
                      "  throw new Error(\"[v10.6] Missing login_confirm_payload. The ambiguous login step likely failed.\");",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test(\"Confirm login must return 200\", function () {",
                      "  pm.expect(pm.response.code, \"status\").to.equal(200);",
                      "});",
                      "let json = {};",
                      "try { json = pm.response.json(); } catch (e) {}",
                      "pm.test(\"Confirm response must contain token\", function () {",
                      "  const token = json.token || json.accessToken || json.jwt;",
                      "  pm.expect(token, \"token\").to.be.a(\"string\").and.not.empty;",
                      "});"
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "ðŸŽ¯ 02 - CONTROL PLANE AUTH TESTS (V3)",
      "description": "Testes de refresh e logout do control plane",
      "item": [
        {
          "name": "02.01 controlplane refresh",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Controlplane refresh OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('superadmin_token_new', json.accessToken);",
                  "pm.environment.set('superadmin_refresh_new', json.refreshToken);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{superadmin_refresh}}\"\n}"
            },
            "url": "{{base_url}}/api/controlplane/auth/refresh"
          }
        },
        {
          "name": "02.02 controlplane logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Controlplane logout OK', () => pm.expect(pm.response.code).to.be.oneOf([204]));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{superadmin_refresh_new}}\"\n}"
            },
            "url": "{{base_url}}/api/controlplane/auth/logout"
          }
        }
      ]
    },
    {
      "name": "ðŸ’° 03 - BILLING MANAGER TESTS (V4)",
      "description": "Testes especÃ­ficos do billing manager",
      "item": [
        {
          "name": "03.01 billing manager me",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Billing manager me OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.expect(json.email).to.equal('billing@platform.local');"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{billing_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/me"
          }
        },
        {
          "name": "03.02 billing manager refresh",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Refresh OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('billing_token_new', json.accessToken);",
                  "pm.environment.set('billing_refresh_new', json.refreshToken);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{billing_refresh}}\"\n}"
            },
            "url": "{{base_url}}/api/controlplane/auth/refresh"
          }
        },
        {
          "name": "03.03 billing manager logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Logout OK', () => pm.expect(pm.response.code).to.be.oneOf([204]));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{billing_refresh_new}}\"\n}"
            },
            "url": "{{base_url}}/api/controlplane/auth/logout"
          }
        }
      ]
    },
    {
      "name": "ðŸ†˜ 04 - SUPPORT TESTS (V5)",
      "description": "Testes de permissÃµes do support",
      "item": [
        {
          "name": "04.01 support me",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Support me OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.expect(json.email).to.equal('support@platform.local');"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{support_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/me"
          }
        },
        {
          "name": "04.02 support list accounts",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Support list accounts OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{support_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/accounts"
          }
        },
        {
          "name": "04.03 support list users",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Support list users OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{support_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/users"
          }
        }
      ]
    },
    {
      "name": "âš™ï¸ 05 - OPERATOR TESTS (V5)",
      "description": "Testes de permissÃµes do operator",
      "item": [
        {
          "name": "05.01 operator me",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Operator me OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.expect(json.email).to.equal('operator@platform.local');"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{operator_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/me"
          }
        },
        {
          "name": "05.02 operator list accounts",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Operator list accounts OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{operator_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/accounts"
          }
        },
        {
          "name": "05.03 operator cannot list users",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Operator cannot list users (403)', () => pm.expect(pm.response.code).to.be.oneOf([403]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{operator_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/users"
          }
        }
      ]
    },
    {
      "name": "ðŸ’³ 06 - BILLING TESTS (V6)",
      "description": "Testes de criaÃ§Ã£o e consulta de pagamentos",
      "item": [
        {
          "name": "06.01 superadmin create payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Superadmin create payment: created (200) or already exists (409)', () => {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200,409]);",
                  "});",
                  "if (pm.response.code === 409) {",
                  "  console.warn('âš ï¸ Payment not created because server returned 409 Conflict. This usually means a payment already exists or business rule blocked creation.');",
                  "  try { console.warn(pm.response.json()); } catch (e) {}",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{superadmin_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountId\": \"{{account_id}}\",\n  \"amount\": 100.00,\n  \"paymentMethod\": \"CREDIT_CARD\",\n  \"paymentGateway\": \"STRIPE\",\n  \"description\": \"Test payment\"\n}"
            },
            "url": "{{base_url}}/api/controlplane/billing/payments"
          }
        },
        {
          "name": "06.02 superadmin list pending payments",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Superadmin list pending payments OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{superadmin_token}}"
              }
            ],
            "url": "{{base_url}}/api/admin/billing/payments/query/status/PENDING"
          }
        },
        {
          "name": "06.03 superadmin get total paid",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Superadmin get total paid OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{superadmin_token}}"
              }
            ],
            "url": "{{base_url}}/api/admin/billing/payments/query/accounts/{{account_id}}/total-paid?startDate=2024-01-01T00:00:00Z&endDate=2024-12-31T23:59:59Z"
          }
        },
        {
          "name": "06.04 superadmin count completed payments",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Superadmin count completed OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{superadmin_token}}"
              }
            ],
            "url": "{{base_url}}/api/admin/billing/payments/query/accounts/{{account_id}}/count-completed"
          }
        },
        {
          "name": "06.05 billing manager list pending payments",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Billing manager list pending payments OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{billing_token}}"
              }
            ],
            "url": "{{base_url}}/api/admin/billing/payments/query/status/PENDING"
          }
        },
        {
          "name": "06.06 support cannot list payments",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Support cannot list payments (403)', () => pm.expect(pm.response.code).to.be.oneOf([403]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{support_token}}"
              }
            ],
            "url": "{{base_url}}/api/admin/billing/payments/query/status/PENDING"
          }
        },
        {
          "name": "06.07 operator cannot list payments",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Operator cannot list payments (403)', () => pm.expect(pm.response.code).to.be.oneOf([403]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{operator_token}}"
              }
            ],
            "url": "{{base_url}}/api/admin/billing/payments/query/status/PENDING"
          }
        }
      ]
    },
    {
      "name": "ðŸ—‚ï¸ 07 - CATEGORY TESTS (V7)",
      "description": "CRUD de categorias",
      "item": [
        {
          "name": "07.01 create category",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Create category OK', () => pm.expect(pm.response.code).to.be.oneOf([201]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('category_id', String(json.id));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"EletrÃ´nicos\"\n}"
            },
            "url": "{{base_url}}/api/tenant/categories"
          }
        },
        {
          "name": "07.02 create another category",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Create category OK', () => pm.expect(pm.response.code).to.be.oneOf([201]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('category_id_2', String(json.id));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Livros\"\n}"
            },
            "url": "{{base_url}}/api/tenant/categories"
          }
        },
        {
          "name": "07.03 list all categories",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('List categories OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.expect(json.length).to.be.at.least(2);"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/categories"
          }
        },
        {
          "name": "07.04 get category by id",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Get category OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.expect(json.id).to.equal(Number(pm.environment.get('category_id')));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/categories/{{category_id}}"
          }
        },
        {
          "name": "07.05 update category",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Update category OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"EletrÃ´nicos Atualizado\"\n}"
            },
            "url": "{{base_url}}/api/tenant/categories/{{category_id}}"
          }
        },
        {
          "name": "07.06 toggle category active",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Toggle active OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "url": "{{base_url}}/api/tenant/categories/{{category_id}}/toggle-active"
          }
        },
        {
          "name": "07.07 soft delete category",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Soft delete OK', () => pm.expect(pm.response.code).to.be.oneOf([204]));"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "url": "{{base_url}}/api/tenant/categories/{{category_id}}"
          }
        },
        {
          "name": "07.08 restore category",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Restore OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "url": "{{base_url}}/api/tenant/categories/{{category_id}}/restore"
          }
        }
      ]
    },
    {
      "name": "ðŸ“‚ 08 - SUBCATEGORY TESTS (V7)",
      "description": "Testes de subcategorias",
      "item": [
        {
          "name": "08.01 create subcategory",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Create subcategory OK', () => pm.expect(pm.response.code).to.be.oneOf([201]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('subcategory_id', String(json.id));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Smartphones\"\n}"
            },
            "url": "{{base_url}}/api/tenant/subcategories/category/{{category_id_2}}"
          }
        },
        {
          "name": "08.02 list subcategories by category",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('List subcategories OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.expect(json.length).to.be.at.least(1);"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/subcategories/category/{{category_id_2}}/not-deleted"
          }
        }
      ]
    },
    {
      "name": "ðŸ­ 09 - SUPPLIER TESTS (V7)",
      "description": "Testes de fornecedores",
      "item": [
        {
          "name": "09.01 create supplier",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Create supplier OK', () => pm.expect(pm.response.code).to.be.oneOf([201]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('supplier_id', json.id);",
                  "",
                  "// v10.4: capture supplier_id for FULL extras",
                  "try {",
                  "  const j = pm.response.json();",
                  "  const sid = j.id || (j.data && j.data.id);",
                  "  if (sid) { pm.collectionVariables.set('supplier_id', sid); }",
                  "} catch (e) {}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Fornecedor Teste\",\n  \"email\": \"fornecedor@teste.com\",\n  \"phone\": \"11999999999\",\n  \"document\": \"12345678000199\",\n  \"documentType\": \"CNPJ\"\n}"
            },
            "url": "{{base_url}}/api/tenant/suppliers"
          }
        },
        {
          "name": "09.02 list suppliers",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('List suppliers OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.expect(json.length).to.be.at.least(1);"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/suppliers"
          }
        }
      ]
    },
    {
      "name": "ðŸ“¦ 10 - PRODUCT TESTS (V7)",
      "description": "CRUD de produtos",
      "item": [
        {
          "name": "10.01 create product",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Create product OK', () => pm.expect(pm.response.code).to.be.oneOf([201]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('product_id', json.id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Smartphone XYZ\",\n  \"sku\": \"SM-001\",\n  \"price\": 1999.99,\n  \"categoryId\": {{category_id_2}},\n  \"subcategoryId\": {{subcategory_id}},\n  \"stockQuantity\": 10,\n  \"brand\": \"Apple\"\n}"
            },
            "url": "{{base_url}}/api/tenant/products/detailed"
          }
        },
        {
          "name": "10.02 list products",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('List products OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.expect(json.content.length).to.be.at.least(1);"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/products?page=0&size=10"
          }
        },
        {
          "name": "10.03 get product by id",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Get product OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));",
                  "const json = pm.response.json();",
                  "pm.expect(json.name).to.equal('Smartphone XYZ');"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/products/{{product_id}}"
          }
        },
        {
          "name": "10.04 update product cost",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Update cost OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "url": "{{base_url}}/api/tenant/products/{{product_id}}/cost-price?costPrice=1500.00"
          }
        },
        {
          "name": "10.05 toggle product active",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Toggle active OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "url": "{{base_url}}/api/tenant/products/{{product_id}}/toggle-active"
          }
        }
      ]
    },
    {
      "name": "ðŸ” 11 - PRODUCT QUERIES (V7)",
      "description": "Consultas de produtos",
      "item": [
        {
          "name": "11.01 list products by category",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('List by category OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/products/category/{{category_id_2}}"
          }
        },
        {
          "name": "11.02 count low stock",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Count low stock OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/products/low-stock/count?threshold=5"
          }
        },
        {
          "name": "11.03 search products",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Search products OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/products/search?name=Smartphone"
          }
        }
      ]
    },
    {
      "name": "âš ï¸ 12 - NEGATIVE TESTS (V7)",
      "description": "Testes de validaÃ§Ã£o",
      "item": [
        {
          "name": "12.01 create product without category",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Create without category fails (400)', () => pm.expect(pm.response.code).to.be.oneOf([400]));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Produto Sem Categoria\",\n  \"sku\": \"SEM-001\",\n  \"price\": 99.99\n}"
            },
            "url": "{{base_url}}/api/tenant/products/detailed"
          }
        },
        {
          "name": "12.02 create duplicate sku",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Duplicate SKU fails (409)', () => pm.expect(pm.response.code).to.be.oneOf([409]));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Outro Smartphone\",\n  \"sku\": \"SM-001\",\n  \"price\": 1999.99,\n  \"categoryId\": {{category_id_2}}\n}"
            },
            "url": "{{base_url}}/api/tenant/products/detailed"
          }
        }
      ]
    },
    {
      "name": "ðŸ‘¥ 13 - TENANT USERS TESTS (ADDED to reach 61)",
      "description": "Endpoints existentes em TenantUserController (CRUD + status + soft delete/restore).",
      "item": [
        {
          "name": "13.01 create tenant user",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const ts = Date.now();",
                  "pm.environment.set('tenant_user_email', `e2e_user_${ts}@tenant.local`);"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Create tenant user OK', () => pm.expect(pm.response.code).to.be.oneOf([200,201]));",
                  "const json = pm.response.json();",
                  "pm.environment.set('tenant_user_created_id', String(json.id));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"E2E User\",\n  \"email\": \"{{tenant_user_email}}\",\n    \"password\": \"admin123\",\n\"role\": \"TENANT_USER\",\n  \"permissions\": []\n}"
            },
            "url": "{{base_url}}/api/tenant/users"
          }
        },
        {
          "name": "13.02 list tenant users",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('List tenant users OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/users"
          }
        },
        {
          "name": "13.03 get tenant user by id",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Get tenant user OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/users/{{tenant_user_created_id}}"
          }
        },
        {
          "name": "13.04 count enabled tenant users",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Count enabled OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/tenant/users/count-enabled"
          }
        },
        {
          "name": "13.05 suspend by admin (status)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Suspend status OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "url": "{{base_url}}/api/tenant/users/{{tenant_user_created_id}}/status?suspendedByAdmin=true"
          }
        },
        {
          "name": "13.06 unsuspend by admin (status)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Unsuspend status OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "url": "{{base_url}}/api/tenant/users/{{tenant_user_created_id}}/status?suspendedByAdmin=false"
          }
        },
        {
          "name": "13.07 soft delete tenant user",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Soft delete OK', () => pm.expect(pm.response.code).to.be.oneOf([200,204]));"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "url": "{{base_url}}/api/tenant/users/{{tenant_user_created_id}}/soft-delete"
          }
        },
        {
          "name": "13.08 restore tenant user",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Restore OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "url": "{{base_url}}/api/tenant/users/{{tenant_user_created_id}}/restore"
          }
        }
      ]
    },
    {
      "name": "ðŸ¢ 14 - CONTROLPLANE ACCOUNT QUERIES (ADDED to reach 61)",
      "description": "Consultas de conta no controlplane (GET-only) usando superadmin.",
      "item": [
        {
          "name": "14.01 superadmin get account by id",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Get account OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{superadmin_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/accounts/{{account_id}}"
          }
        },
        {
          "name": "14.02 superadmin get account admin details",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Admin details OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{superadmin_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/accounts/{{account_id}}/admin-details"
          }
        },
        {
          "name": "14.03 superadmin list account tenant users",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Tenant users list OK', () => pm.expect(pm.response.code).to.be.oneOf([200]));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{superadmin_token}}"
              }
            ],
            "url": "{{base_url}}/api/controlplane/accounts/{{account_id}}/tenant-users"
          }
        }
      ]
    },
    {
      "name": "ðŸ§© v10 - FULL (disabled extras)",
      "item": [
        {
          "name": "TENANT (auto-header) - EXTRA",
          "item": [
            {
              "name": "DELETE /api/tenant/categories/{id}",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/categories/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "categories",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "DELETE /api/tenant/subcategories/{id}",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/subcategories/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "subcategories",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "DELETE /api/tenant/suppliers/{id}",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/{{supplier_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "{{supplier_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "DELETE /api/tenant/users/{userId:\\\\d+}",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/{{tenant_user_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "{{tenant_user_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "DELETE /api/tenant/users/{userId:\\\\d+}/hard",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/{{tenant_user_id}}/hard",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "{{tenant_user_id}}",
                    "hard"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/_debug/schema",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/_debug/schema",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "_debug",
                    "schema"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/billing/payments/account/{accountId}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/billing/payments/account/{{account_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "billing",
                    "payments",
                    "account",
                    "{{account_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/billing/payments/account/{accountId}/has-active",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/billing/payments/account/{{account_id}}/has-active",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "billing",
                    "payments",
                    "account",
                    "{{account_id}}",
                    "has-active"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/billing/payments/account/{accountId}/{paymentId}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/billing/payments/account/{{account_id}}/{{payment_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "billing",
                    "payments",
                    "account",
                    "{{account_id}}",
                    "{{payment_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/categories/active",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/categories/active",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "categories",
                    "active"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/categories/admin",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/categories/admin",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "categories",
                    "admin"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/categories/search",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/categories/search",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "categories",
                    "search"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/categories/{id}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/categories/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "categories",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/any/brand",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/any/brand",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "any",
                    "brand"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/any/category/{categoryId}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/any/category/{{category_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "any",
                    "category",
                    "{{category_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/any/subcategory/{subcategoryId}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/any/subcategory/{{subcategory_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "any",
                    "subcategory",
                    "{{subcategory_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/category/{categoryId}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/category/{{category_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "category",
                    "{{category_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/count-by-supplier",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/count-by-supplier",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "count-by-supplier"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/inventory-value",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/inventory-value",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "inventory-value"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/low-stock/count",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/low-stock/count",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "low-stock",
                    "count"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/search",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/search",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "search"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/subcategory/{subcategoryId}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/subcategory/{{subcategory_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "subcategory",
                    "{{subcategory_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/supplier/{supplierId}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/supplier/{{supplier_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "supplier",
                    "{{supplier_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/products/{id}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/subcategories/category/{categoryId}/admin",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/subcategories/category/{{category_id}}/admin",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "subcategories",
                    "category",
                    "{{category_id}}",
                    "admin"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/subcategories/category/{categoryId}/not-deleted",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/subcategories/category/{{category_id}}/not-deleted",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "subcategories",
                    "category",
                    "{{category_id}}",
                    "not-deleted"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/subcategories/{id}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/subcategories/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "subcategories",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/suppliers/active",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/active",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "active"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/suppliers/document/{document}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/document/{{document}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "document",
                    "{{document}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/suppliers/email",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/email",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "email"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/suppliers/email/any",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/email/any",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "email",
                    "any"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/suppliers/search",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/search",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "search"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/suppliers/{id}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/users/enabled",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/enabled",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "enabled"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/users/enabled/count",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/enabled/count",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "enabled",
                    "count"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/users/enabled/{userId:\\\\d+}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/enabled/{{tenant_user_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "enabled",
                    "{{tenant_user_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/tenant/users/{userId:\\\\d+}",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/{{tenant_user_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "{{tenant_user_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/admin/users/{userId}/suspend",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/admin/users/{{tenant_user_id}}/suspend",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "admin",
                    "users",
                    "{{tenant_user_id}}",
                    "suspend"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/categories/{id}/restore",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/categories/{{id}}/restore",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "categories",
                    "{{id}}",
                    "restore"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/categories/{id}/toggle-active",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/categories/{{id}}/toggle-active",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "categories",
                    "{{id}}",
                    "toggle-active"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/me/password",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/me/password",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "me",
                    "password"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/products/{id}/cost-price",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/{{id}}/cost-price",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "{{id}}",
                    "cost-price"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/products/{id}/toggle-active",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/products/{{id}}/toggle-active",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "products",
                    "{{id}}",
                    "toggle-active"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/subcategories/{id}/restore",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/subcategories/{{id}}/restore",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "subcategories",
                    "{{id}}",
                    "restore"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/subcategories/{id}/toggle-active",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/subcategories/{{id}}/toggle-active",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "subcategories",
                    "{{id}}",
                    "toggle-active"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/suppliers/{id}/restore",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/{{id}}/restore",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "{{id}}",
                    "restore"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/suppliers/{id}/toggle-active",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/{{id}}/toggle-active",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "{{id}}",
                    "toggle-active"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/users/{userId:\\\\d+}/password",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/{{tenant_user_id}}/password",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "{{tenant_user_id}}",
                    "password"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/users/{userId:\\\\d+}/restore",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/{{tenant_user_id}}/restore",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "{{tenant_user_id}}",
                    "restore"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/users/{userId:\\\\d+}/soft-delete",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/{{tenant_user_id}}/soft-delete",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "{{tenant_user_id}}",
                    "soft-delete"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/users/{userId:\\\\d+}/status",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/{{tenant_user_id}}/status",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "{{tenant_user_id}}",
                    "status"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/tenant/users/{userId:\\\\d+}/transfer-admin",
              "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/users/{{tenant_user_id}}/transfer-admin",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "users",
                    "{{tenant_user_id}}",
                    "transfer-admin"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/tenant/auth/login/confirm",
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/auth/login/confirm",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "auth",
                    "login",
                    "confirm"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/tenant/password/forgot",
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/password/forgot",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "password",
                    "forgot"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/tenant/password/reset",
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/password/reset",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "password",
                    "reset"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/tenant/subcategories/category/{categoryId}",
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/subcategories/category/{{category_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "subcategories",
                    "category",
                    "{{category_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PUT /api/tenant/categories/{id}",
              "request": {
                "method": "PUT",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/categories/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "categories",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PUT /api/tenant/me",
              "request": {
                "method": "PUT",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/me",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "me"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PUT /api/tenant/subcategories/{id}",
              "request": {
                "method": "PUT",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/subcategories/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "subcategories",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PUT /api/tenant/suppliers/{id}",
              "request": {
                "method": "PUT",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/tenant/suppliers/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "tenant",
                    "suppliers",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            }
          ]
        },
        {
          "name": "CONTROL PLANE (superadmin_token) - EXTRA",
          "item": [
            {
              "name": "DELETE /api/controlplane/accounts/{accountId}",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "DELETE /api/controlplane/users/{userId}",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/{{tenant_user_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "{{tenant_user_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/by-status",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/by-status",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "by-status"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/created-between",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/created-between",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "created-between"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/query/payment-due-before",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/query/payment-due-before",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "query",
                    "payment-due-before"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/query/{id}",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/query/{{id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "query",
                    "{{id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/query/{id}/enabled",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/query/{{id}}/enabled",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "query",
                    "{{id}}",
                    "enabled"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/search",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/search",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "search"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/{accountId}",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/{accountId}/admin-details",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}/admin-details",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}",
                    "admin-details"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/{accountId}/provisioning-events",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}/provisioning-events",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}",
                    "provisioning-events"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/{accountId}/provisioning-events/latest",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}/provisioning-events/latest",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}",
                    "provisioning-events",
                    "latest"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/accounts/{accountId}/tenant-users",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}/tenant-users",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}",
                    "tenant-users"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/users/enabled",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/enabled",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "enabled"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/users/{userId}",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/{{tenant_user_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "{{tenant_user_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/controlplane/users/{userId}/enabled",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/{{tenant_user_id}}/enabled",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "{{tenant_user_id}}",
                    "enabled"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/controlplane/me/password",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/me/password",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "me",
                    "password"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/controlplane/users/{userId}",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/{{tenant_user_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "{{tenant_user_id}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/controlplane/users/{userId}/permissions",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/{{tenant_user_id}}/permissions",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "{{tenant_user_id}}",
                    "permissions"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/controlplane/users/{userId}/reset-password",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/{{tenant_user_id}}/reset-password",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "{{tenant_user_id}}",
                    "reset-password"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "PATCH /api/controlplane/users/{userId}/restore",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/{{tenant_user_id}}/restore",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "{{tenant_user_id}}",
                    "restore"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/controlplane/accounts/query/count",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/query/count",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "query",
                    "count"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/controlplane/accounts/signup",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/signup",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "signup"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/controlplane/accounts/{accountId}/restore",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}/restore",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}",
                    "restore"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/controlplane/accounts/{accountId}/status",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}/status",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}",
                    "status"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/controlplane/accounts/{accountId}/tenant-users/{userId}/suspended-by-admin",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/accounts/{{account_id}}/tenant-users/{{tenant_user_id}}/suspended-by-admin",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "accounts",
                    "{{account_id}}",
                    "tenant-users",
                    "{{tenant_user_id}}",
                    "suspended-by-admin"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/controlplane/users",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/controlplane/users/{userId}/restore-by-admin",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/{{tenant_user_id}}/restore-by-admin",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "{{tenant_user_id}}",
                    "restore-by-admin"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "POST /api/controlplane/users/{userId}/suspend-by-admin",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/controlplane/users/{{tenant_user_id}}/suspend-by-admin",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "controlplane",
                    "users",
                    "{{tenant_user_id}}",
                    "suspend-by-admin"
                  ]
                }
              },
              "response": [],
              "disabled": true
            }
          ]
        },
        {
          "name": "ADMIN (superadmin_token) - EXTRA",
          "item": [
            {
              "name": "GET /api/admin/billing/payments/query/accounts/{accountId}/count-completed",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/billing/payments/query/accounts/{{account_id}}/count-completed",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "billing",
                    "payments",
                    "query",
                    "accounts",
                    "{{account_id}}",
                    "count-completed"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/admin/billing/payments/query/accounts/{accountId}/total-paid",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/billing/payments/query/accounts/{{account_id}}/total-paid",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "billing",
                    "payments",
                    "query",
                    "accounts",
                    "{{account_id}}",
                    "total-paid"
                  ]
                }
              },
              "response": [],
              "disabled": true
            },
            {
              "name": "GET /api/admin/billing/payments/query/status/{status}",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{superadmin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/billing/payments/query/status/{{status}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "billing",
                    "payments",
                    "query",
                    "status",
                    "{{status}}"
                  ]
                }
              },
              "response": [],
              "disabled": true
            }
          ]
        }
      ],
      "description": "Auto-generated from controllers; disabled so master 61 E2E stays green."
    }
  ],
  "variable": [
    {
      "key": "id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "1",
      "type": "string"
    },
    {
      "key": "accountId",
      "value": "2",
      "type": "string"
    },
    {
      "key": "payment_id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "status",
      "value": "PENDING",
      "type": "string"
    },
    {
      "key": "document",
      "value": "12345678000199",
      "type": "string"
    },
    {
      "key": "email",
      "value": "supplier@example.com",
      "type": "string"
    },
    {
      "key": "categoryId",
      "value": "1",
      "type": "string"
    },
    {
      "key": "subcategoryId",
      "value": "1",
      "type": "string"
    },
    {
      "key": "supplierId",
      "value": "00000000-0000-0000-0000-000000000001",
      "type": "string"
    },
    {
      "key": "productId",
      "value": "00000000-0000-0000-0000-000000000002",
      "type": "string"
    },
    {
      "key": "supplier_id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "tenant2_email",
      "value": "",
      "type": "string"
    },
    {
      "key": "tenant2_password",
      "value": "",
      "type": "string"
    },
    {
      "key": "tenant2_account_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "tenant2_schema",
      "value": "",
      "type": "string"
    },
    {
      "key": "tenant2_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "shared_email",
      "value": "",
      "type": "string"
    },
    {
      "key": "shared_password",
      "value": "",
      "type": "string"
    },
    {
      "key": "ambig_challenge_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "ambig_selected_tenant_slug",
      "value": "",
      "type": "string"
    },
    {
      "key": "ambig_selected_account_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "login_confirm_payload",
      "value": "",
      "type": "string"
    }
  ]
}